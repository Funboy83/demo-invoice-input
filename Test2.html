<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printable Invoice Template</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- React & ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- REMOVED BABEL CDN: No longer needed as JSX is pre-compiled -->
    
    <style>
        /* Custom print styles to ensure correct display and hiding of elements */
        @media print {
            body * {
                visibility: hidden; /* Hide everything by default for printing */
            }
            /* Show only the invoice display section for printing */
            .invoice-display-section, .invoice-display-section * {
                visibility: visible;
            }
            .invoice-display-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                max-width: none; /* Override max-width for print */
                margin: 0;
                padding: 20px; /* Adjust padding for print */
                box-sizing: border-box;
                border: 1px solid #ccc !important; /* Ensure border for print */
                box-shadow: none !important; /* Remove shadow for print */
                border-radius: 0 !important; /* Remove border-radius for print */
            }
            .hidden-for-print {
                display: none !important; /* Elements with this class will be hidden when printing */
            }
            /* Ensure table takes full width in print */
            .invoice-display-section table {
                width: 100%;
            }
        }
    </style>
</head>
<body class="font-sans">
    <div id="root"></div>

    <script type="text/javascript">
        // Main App component for the Invoice Template
        function App() {
            // State for general invoice details
            const [invoiceDetails, setInvoiceDetails] = React.useState({
                invoiceNumber: 'INV-001',
                date: new Date().toISOString().slice(0, 10), // Current date in YYYY-MM-DD format
                customerName: '',
                notes: ''
            });

            // State for the line items in the invoice
            const [items, setItems] = React.useState([]);

            // State for the new item being added
            const [newItem, setNewItem] = React.useState({
                name: '',
                quantity: 1,
                unitPrice: 0.00
            });

            // Ref to the invoice section for printing
            const invoiceRef = React.useRef();

            // Calculate the total amount of all items
            const subtotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);

            // Handle changes in invoice detail fields
            const handleInvoiceDetailsChange = (e) => {
                const { name, value } = e.target;
                setInvoiceDetails(prevDetails => ({
                    ...prevDetails,
                    [name]: value
                }));
            };

            // Handle changes in new item input fields
            const handleNewItemChange = (e) => {
                const { name, value } = e.target;
                setNewItem(prevItem => ({
                    ...prevItem,
                    // For quantity and unitPrice, parse as float; otherwise, use the raw value.
                    // Ensure unitPrice can be an empty string for easier input/deletion.
                    [name]: (name === 'quantity' || name === 'unitPrice') ?
                            (value === '' ? '' : parseFloat(value) || 0) : value
                }));
            };

            // Add a new item to the invoice
            const handleAddItem = (e) => {
                e.preventDefault(); // Prevent form submission
                // Ensure all required fields for newItem are filled and valid
                if (newItem.name && newItem.quantity > 0 && typeof newItem.unitPrice === 'number' && newItem.unitPrice >= 0) {
                    setItems(prevItems => [...prevItems, { ...newItem }]);
                    setNewItem({ name: '', quantity: 1, unitPrice: 0.00 }); // Reset new item fields
                } else {
                    // Use a custom message box or alert for user feedback
                    console.error("Please fill in all item details correctly (Name, Quantity > 0, Unit Price >= 0).");
                }
            };

            // Remove an item from the invoice by index
            const handleRemoveItem = (index) => {
                setItems(prevItems => prevItems.filter((_, i) => i !== index));
            };

            // Handle the print action
            const handlePrint = () => {
                window.print();
            };

            // Ensure initial focus on the first input field
            React.useEffect(() => {
                document.getElementById('invoiceNumber').focus();
            }, []);

            return React.createElement(
                "div",
                { className: "min-h-screen bg-gray-100 p-4 font-sans text-gray-800 flex flex-col items-center" },
                // Input Form Section
                React.createElement(
                    "div",
                    { className: "w-full max-w-4xl bg-white rounded-lg shadow-md p-6 mb-8 hidden-for-print" },
                    React.createElement(
                        "h1",
                        { className: "text-3xl font-bold text-center mb-6 text-gray-700" },
                        "Create New Invoice"
                    ),
                    // Invoice Header Details Input
                    React.createElement(
                        "div",
                        { className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-6" },
                        React.createElement(
                            "div",
                            { className: "flex flex-col" },
                            React.createElement(
                                "label",
                                { htmlFor: "invoiceNumber", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Invoice Number:"
                            ),
                            React.createElement("input", {
                                type: "text",
                                id: "invoiceNumber",
                                name: "invoiceNumber",
                                value: invoiceDetails.invoiceNumber,
                                onChange: handleInvoiceDetailsChange,
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                placeholder: "e.g., INV-001"
                            })
                        ),
                        React.createElement(
                            "div",
                            { className: "flex flex-col" },
                            React.createElement(
                                "label",
                                { htmlFor: "date", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Date:"
                            ),
                            React.createElement("input", {
                                type: "date",
                                id: "date",
                                name: "date",
                                value: invoiceDetails.date,
                                onChange: handleInvoiceDetailsChange,
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            })
                        ),
                        React.createElement(
                            "div",
                            { className: "flex flex-col md:col-span-2" },
                            React.createElement(
                                "label",
                                { htmlFor: "customerName", className: "text-sm font-medium text-gray-600 mb-1" },
                                "To (Customer Name):"
                            ),
                            React.createElement("input", {
                                type: "text",
                                id: "customerName",
                                name: "customerName",
                                value: invoiceDetails.customerName,
                                onChange: handleInvoiceDetailsChange,
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                placeholder: "e.g., John Doe"
                            })
                        ),
                        React.createElement(
                            "div",
                            { className: "flex flex-col md:col-span-2" },
                            React.createElement(
                                "label",
                                { htmlFor: "notes", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Notes:"
                            ),
                            React.createElement("textarea", {
                                id: "notes",
                                name: "notes",
                                value: invoiceDetails.notes,
                                onChange: handleInvoiceDetailsChange,
                                rows: "3",
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                placeholder: "Add any specific notes for the invoice here..."
                            })
                        )
                    ),
                    // Add New Item Form
                    React.createElement(
                        "h2",
                        { className: "text-xl font-semibold text-gray-700 mb-4" },
                        "Add Item"
                    ),
                    React.createElement(
                        "form",
                        { onSubmit: handleAddItem, className: "grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6" },
                        React.createElement(
                            "div",
                            { className: "flex flex-col" },
                            React.createElement(
                                "label",
                                { htmlFor: "newItemName", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Item Name:"
                            ),
                            React.createElement("input", {
                                type: "text",
                                id: "newItemName",
                                name: "name",
                                value: newItem.name,
                                onChange: handleNewItemChange,
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                placeholder: "Product/Service",
                                required: true
                            })
                        ),
                        React.createElement(
                            "div",
                            { className: "flex flex-col" },
                            React.createElement(
                                "label",
                                { htmlFor: "newItemQuantity", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Quantity:"
                            ),
                            React.createElement("input", {
                                type: "number",
                                id: "newItemQuantity",
                                name: "quantity",
                                value: newItem.quantity,
                                onChange: handleNewItemChange,
                                min: "1",
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                required: true
                            })
                        ),
                        React.createElement(
                            "div",
                            { className: "flex flex-col" },
                            React.createElement(
                                "label",
                                { htmlFor: "newItemUnitPrice", className: "text-sm font-medium text-gray-600 mb-1" },
                                "Unit Price:"
                            ),
                            React.createElement("input", {
                                type: "number",
                                id: "newItemUnitPrice",
                                name: "unitPrice",
                                value: newItem.unitPrice,
                                onChange: handleNewItemChange,
                                step: "0.01",
                                min: "0",
                                className: "p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",
                                required: true
                            })
                        ),
                        React.createElement(
                            "button",
                            {
                                type: "submit",
                                className: "w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-md"
                            },
                            "Add Item"
                        )
                    ),
                    // Printable Invoice Display Section
                    React.createElement(
                        "div",
                        {
                            ref: invoiceRef,
                            className: "w-full max-w-4xl bg-white rounded-lg shadow-lg p-8 invoice-display-section",
                            style: { fontFamily: 'Inter, sans-serif' }
                        },
                        React.createElement(
                            "div",
                            { className: "flex justify-between items-center mb-8 pb-4 border-b border-gray-200" },
                            React.createElement(
                                "h1",
                                { className: "text-4xl font-extrabold text-gray-900" },
                                "INVOICE"
                            ),
                            React.createElement(
                                "div",
                                { className: "text-right" },
                                React.createElement(
                                    "p",
                                    { className: "text-sm text-gray-600" },
                                    "Invoice No: ",
                                    React.createElement(
                                        "span",
                                        { className: "font-semibold text-gray-800" },
                                        invoiceDetails.invoiceNumber
                                    )
                                ),
                                React.createElement(
                                    "p",
                                    { className: "text-sm text-gray-600" },
                                    "Date: ",
                                    React.createElement(
                                        "span",
                                        { className: "font-semibold text-gray-800" },
                                        invoiceDetails.date
                                    )
                                )
                            )
                        ),
                        React.createElement(
                            "div",
                            { className: "mb-8" },
                            React.createElement(
                                "h2",
                                { className: "text-lg font-semibold text-gray-700 mb-2" },
                                "To:"
                            ),
                            React.createElement(
                                "p",
                                { className: "text-gray-800 text-base" },
                                invoiceDetails.customerName || 'Customer Name'
                            )
                        ),
                        // Invoice Items Table
                        React.createElement(
                            "div",
                            { className: "overflow-x-auto mb-8" },
                            React.createElement(
                                "table",
                                { className: "min-w-full bg-white border border-gray-300 rounded-md overflow-hidden" },
                                React.createElement(
                                    "thead",
                                    null,
                                    React.createElement(
                                        "tr",
                                        { className: "bg-gray-100 border-b border-gray-300" },
                                        React.createElement(
                                            "th",
                                            { className: "py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider" },
                                            "Quantity"
                                        ),
                                        React.createElement(
                                            "th",
                                            { className: "py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider" },
                                            "Description"
                                        ),
                                        React.createElement(
                                            "th",
                                            { className: "py-3 px-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider" },
                                            "Unit Price"
                                        ),
                                        React.createElement(
                                            "th",
                                            { className: "py-3 px-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider" },
                                            "Amount"
                                        ),
                                        React.createElement(
                                            "th",
                                            { className: "py-3 px-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider hidden-for-print" },
                                            "Actions"
                                        )
                                    )
                                ),
                                React.createElement(
                                    "tbody",
                                    null,
                                    items.length === 0 ? React.createElement(
                                        "tr",
                                        null,
                                        React.createElement(
                                            "td",
                                            { colSpan: "5", className: "py-4 px-4 text-center text-gray-500 italic" },
                                            "No items added yet."
                                        )
                                    ) : items.map((item, index) => React.createElement(
                                        "tr",
                                        { key: index, className: "border-b border-gray-200 last:border-b-0" },
                                        React.createElement(
                                            "td",
                                            { className: "py-3 px-4 text-sm text-gray-800" },
                                            item.quantity
                                        ),
                                        React.createElement(
                                            "td",
                                            { className: "py-3 px-4 text-sm text-gray-800" },
                                            item.name
                                        ),
                                        React.createElement(
                                            "td",
                                            { className: "py-3 px-4 text-right text-sm text-gray-800" },
                                            "$",
                                            item.unitPrice.toFixed(2)
                                        ),
                                        React.createElement(
                                            "td",
                                            { className: "py-3 px-4 text-right text-sm text-gray-800" },
                                            "$",
                                            (item.quantity * item.unitPrice).toFixed(2)
                                        ),
                                        React.createElement(
                                            "td",
                                            { className: "py-3 px-4 text-center hidden-for-print" },
                                            React.createElement(
                                                "button",
                                                {
                                                    onClick: () => handleRemoveItem(index),
                                                    className: "text-red-600 hover:text-red-800 transition-colors duration-200 text-sm font-medium"
                                                },
                                                "Remove"
                                            )
                                        )
                                    ))
                                )
                            )
                        ),
                        // Notes and Total Section
                        React.createElement(
                            "div",
                            { className: "flex justify-between items-start" },
                            React.createElement(
                                "div",
                                { className: "w-1/2 pr-4" },
                                React.createElement(
                                    "h2",
                                    { className: "text-lg font-semibold text-gray-700 mb-2" },
                                    "Notes:"
                                ),
                                Re