<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Printable Invoice Template</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { font-family: Inter, system-ui, sans-serif; }
    @media print {
      .editor, .actions { display: none !important; }
      #invoice { box-shadow: none !important; border: 1px solid #ccc !important; padding: 20px !important; }
      body { background: #fff !important; }
      @page { margin: 12mm; }
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>
  <script type="text/babel" data-presets="env,react">
    function App(){
      const [invoiceDetails, setInvoiceDetails] = React.useState({
        invoiceNumber: 'INV-001',
        date: new Date().toISOString().slice(0,10),
        customerName: '',
        notes: ''
      });
      const [items, setItems] = React.useState([]);
      const [newItem, setNewItem] = React.useState({ name:'', quantity:1, unitPrice:0.00 });
      const subtotal = items.reduce((sum, it) => sum + (it.quantity * it.unitPrice), 0);
      const onHdr = (e) => { const {name,value}=e.target; setInvoiceDetails(p=>({...p,[name]:value})); };
      const onNew = (e) => {
        const {name,value}=e.target;
        setNewItem(p=>({...p,[name]:(name==='quantity'||name==='unitPrice')?(value===''?'':parseFloat(value)||0):value}));
      };
      const addItem = (e) => { e.preventDefault();
        if (!newItem.name || !(newItem.quantity>0) || typeof newItem.unitPrice!=='number' || newItem.unitPrice<0) return;
        setItems(prev=>[...prev,{...newItem}]); setNewItem({name:'',quantity:1,unitPrice:0.00});
      };
      const removeItem = (i) => setItems(prev=>prev.filter((_,idx)=>idx!==i));
      const printIt = () => window.print();
      React.useEffect(()=>{document.getElementById('invoiceNumber')?.focus();},[]);
      return (
        <div className="min-h-screen p-4 text-gray-800 flex flex-col items-center">
          <div className="editor w-full max-w-4xl bg-white rounded-lg shadow-md p-6 mb-8">
            <h1 className="text-3xl font-bold text-center mb-6 text-gray-700">Create New Invoice</h1>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <div className="flex flex-col">
                <label htmlFor="invoiceNumber" className="text-sm font-medium text-gray-600 mb-1">Invoice Number:</label>
                <input type="text" id="invoiceNumber" name="invoiceNumber" value={invoiceDetails.invoiceNumber}
                  onChange={onHdr} className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., INV-001" />
              </div>
              <div className="flex flex-col">
                <label htmlFor="date" className="text-sm font-medium text-gray-600 mb-1">Date:</label>
                <input type="date" id="date" name="date" value={invoiceDetails.date}
                  onChange={onHdr} className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
              </div>
              <div className="flex flex-col md:col-span-2">
                <label htmlFor="customerName" className="text-sm font-medium text-gray-600 mb-1">To (Customer Name):</label>
                <input type="text" id="customerName" name="customerName" value={invoiceDetails.customerName}
                  onChange={onHdr} className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., John Doe" />
              </div>
              <div className="flex flex-col md:col-span-2">
                <label htmlFor="notes" className="text-sm font-medium text-gray-600 mb-1">Notes:</label>
                <textarea id="notes" name="notes" rows="3" value={invoiceDetails.notes}
                  onChange={onHdr} className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Add notes..."></textarea>
              </div>
            </div>
            <h2 className="text-xl font-semibold text-gray-700 mb-4">Add Item</h2>
            <form onSubmit={addItem} className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6">
              <div className="flex flex-col">
                <label htmlFor="newItemName" className="text-sm font-medium text-gray-600 mb-1">Item Name:</label>
                <input type="text" id="newItemName" name="name" value={newItem.name} onChange={onNew}
                  className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Product/Service" required />
              </div>
              <div className="flex flex-col">
                <label htmlFor="newItemQuantity" className="text-sm font-medium text-gray-600 mb-1">Quantity:</label>
                <input type="number" id="newItemQuantity" name="quantity" min="1" value={newItem.quantity} onChange={onNew}
                  className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required />
              </div>
              <div className="flex flex-col">
                <label htmlFor="newItemUnitPrice" className="text-sm font-medium text-gray-600 mb-1">Unit Price:</label>
                <input type="number" id="newItemUnitPrice" name="unitPrice" step="0.01" min="0" value={newItem.unitPrice} onChange={onNew}
                  className="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required />
              </div>
              <button type="submit" className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-md">Add Item</button>
            </form>
          </div>
          <div id="invoice" className="w-full max-w-4xl bg-white rounded-lg shadow-lg p-8">
            <div className="flex justify-between items-center mb-8 pb-4 border-b border-gray-200">
              <h1 className="text-4xl font-extrabold text-gray-900">INVOICE</h1>
              <div className="text-right">
                <p className="text-sm text-gray-600">Invoice No: <span className="font-semibold text-gray-800">{invoiceDetails.invoiceNumber}</span></p>
                <p className="text-sm text-gray-600">Date: <span className="font-semibold text-gray-800">{invoiceDetails.date}</span></p>
              </div>
            </div>
            <div className="mb-8">
              <h2 className="text-lg font-semibold text-gray-700 mb-2">To:</h2>
              <p className="text-gray-800 text-base">{invoiceDetails.customerName || 'Customer Name'}</p>
            </div>
            <div className="overflow-x-auto mb-8">
              <table className="min-w-full bg-white border border-gray-300 rounded-md overflow-hidden">
                <thead>
                  <tr className="bg-gray-100 border-b border-gray-300">
                    <th className="py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Quantity</th>
                    <th className="py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Description</th>
                    <th className="py-3 px-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">Unit Price</th>
                    <th className="py-3 px-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">Amount</th>
                    <th className="py-3 px-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider print:hidden">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {items.length === 0
                    ? (<tr><td colSpan="5" className="py-4 px-4 text-center text-gray-500 italic">No items added yet.</td></tr>)
                    : items.map((item, i) => (
                      <tr key={i} className="border-b border-gray-200 last:border-b-0">
                        <td className="py-3 px-4 text-sm text-gray-800">{item.quantity}</td>
                        <td className="py-3 px-4 text-sm text-gray-800">{item.name}</td>
                        <td className="py-3 px-4 text-right text-sm text-gray-800">${item.unitPrice.toFixed(2)}</td>
                        <td className="py-3 px-4 text-right text-sm text-gray-800">${(item.quantity * item.unitPrice).toFixed(2)}</td>
                        <td className="py-3 px-4 text-center print:hidden">
                          <button onClick={() => removeItem(i)} className="text-red-600 hover:text-red-800 transition-colors duration-200 text-sm font-medium">Remove</button>
                        </td>
                      </tr>
                    ))}
                </tbody>
              </table>
            </div>
            <div className="flex justify-between items-start">
              <div className="w-1/2 pr-4">
                <h2 className="text-lg font-semibold text-gray-700 mb-2">Notes:</h2>
                <p className="text-gray-800 text-sm italic">{invoiceDetails.notes || 'No specific notes for this invoice.'}</p>
              </div>
              <div className="w-1/2 pl-4 text-right">
                <p className="text-lg font-bold text-gray-800">TOTAL: <span className="text-blue-700">${subtotal.toFixed(2)}</span></p>
              </div>
            </div>
          </div>
          <div className="actions w-full max-w-4xl mt-8 flex justify-center">
            <button onClick={printIt} className="bg-green-600 text-white py-3 px-8 rounded-md hover:bg-green-700 transition-colors duration-200 shadow-lg text-lg font-semibold">Print Invoice</button>
          </div>
        </div>
      );
    }
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
